<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="第五章SQL 常识, 自然语言处理 深度学习 算法码上来">
    <meta name="baidu-site-verification" content="fmlEuI34ir">
    <meta name="google-site-verification" content="yCy2azpds5XSuGZvis6OuA-XIGF5GuGpYRAaGfD6o48">
    <meta name="360-site-verification" content="b7c11a830ef90fd1464ad6206bb7b6e7">
    <meta name="description" content="1. SQL 常识1.1 SQL的介绍属于关系型数据库产品中专用的语句。结构化查询语句。
MySQL 

1.2  SQL 标准
SQL-89  \ SQL-92  \  SQL-99   \SQL03 .....

1.3 sql_mod">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>第五章SQL 常识 | 小明同学</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?46e79e71af0709a5b9106bf20cecc493";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    
        <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
        </script>
    

    <script>
        (function(){
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>

<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body>

    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">小明同学</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/contact" class="waves-effect waves-light">
            
            <i class="fa fa-comments"></i>
            
            <span>留言板</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">小明同学</div>
        <div class="logo-desc">
            
            计算机科学与技术 | 自然语言处理
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        <li>
            <a href="/contact" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-comments"></i>
                
                留言板
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/15.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        第五章SQL 常识
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                        <a href="/tags/leetcode/" target="_blank">
                            <span class="chip bg-color">leetcode</span>
                        </a>
                        
                        <a href="/tags/mysql/" target="_blank">
                            <span class="chip bg-color">mysql</span>
                        </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                        <a href="/categories/mysql/" class="post-category" target="_blank">
                            mysql
                        </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-02-26
                </div>

                <div class="post-author info-break-policy">
                    <i class="fa fa-user-o fa-fw"></i>作者:&nbsp;&nbsp;
                    
                    小明
                    
                </div>

                
                
                <div class="info-break-policy">
                    <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                    5k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    23 分
                </div>
                
                

                
                <div id="busuanzi_container_page_pv" class="info-break-policy">
                    <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                    <span id="busuanzi_value_page_pv"></span>
                </div>
                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="1-SQL-常识"><a href="#1-SQL-常识" class="headerlink" title="1. SQL 常识"></a>1. SQL 常识</h1><h2 id="1-1-SQL的介绍"><a href="#1-1-SQL的介绍" class="headerlink" title="1.1 SQL的介绍"></a>1.1 SQL的介绍</h2><pre class="line-numbers language-shell"><code class="language-shell">属于关系型数据库产品中专用的语句。结构化查询语句。
MySQL 

1.2  SQL 标准
SQL-89  \ SQL-92  \  SQL-99   \SQL03 .....

1.3 sql_mode <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="1-3-1-作用"><a href="#1-3-1-作用" class="headerlink" title="1.3.1 作用"></a>1.3.1 作用</h2><pre class="line-numbers language-scss"><code class="language-scss">影响到了SQL语句的执行行为。为了让数据库在存、取能够满足生活的常识、科学的逻辑，让这些数据有意义。
例子： 
    现实生活中常识：
        日期： <span class="token number">1000</span>-<span class="token number">9999</span> 年 <span class="token number">1</span>-<span class="token number">12</span> 月 <span class="token number">1</span>-<span class="token number">31</span>日 
    科学逻辑：         
        除法：除数不能为<span class="token number">0</span>
<span class="token number">1.3.2</span> 查看sql_mode 
mysql> select @@sql_mode<span class="token punctuation">;</span>
<span class="token property">ONLY_FULL_GROUP_BY</span>          <span class="token punctuation">:</span>  针对group by 语句执行时的规范
<span class="token property">STRICT_TRANS_TABLES</span>         <span class="token punctuation">:</span>  针对事务表启动严格模式
NO_ZERO_IN_DATE             ： <span class="token number">2010</span>-<span class="token number">00</span>-<span class="token number">10</span>
NO_ZERO_DATE                ： <span class="token number">0000</span>-<span class="token number">00</span>-<span class="token number">00</span>
ERROR_FOR_DIVISION_BY_ZERO  ： 除数不能为<span class="token number">0</span>
NO_AUTO_CREATE_USER         ： 是否自动创建用户
<span class="token property">NO_ENGINE_SUBSTITUTION</span>      <span class="token punctuation">:</span>  建表是使用了一个不支持的存储引擎报错。        
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="2-数据库对象属性介绍"><a href="#2-数据库对象属性介绍" class="headerlink" title="2. 数据库对象属性介绍"></a>2. 数据库对象属性介绍</h1><h2 id="2-1-数据库对象"><a href="#2-1-数据库对象" class="headerlink" title="2.1 数据库对象"></a>2.1 数据库对象</h2><pre><code>库
    库名
    库属性：字符集、校对规则

表 
    表名 
    列 ：
        列名
        列属性：数据类型、约束、其他属性
    行
    表属性：引擎、字符集、校对规则、其他。

</code></pre><h3 id="2-2-字符集"><a href="#2-2-字符集" class="headerlink" title="2.2 字符集"></a>2.2 字符集</h3><pre><code>2.2 字符集  
2.2.1 作用 
MySQL 中的 “密码本”
2.2.2 种类
utf8    not  UTF-8  
utf8mb4 is   UTF-8（万国码）

特点 : 
1. utf8   , 最大支持3字节的字符。不支持emoji字符
2. utf8mb4, 最大支持4字节的字符。支持emoji字符。
8.0之前，默认字符集latin1,8.0之后是utf8mb4。
我们建议使用utf8mb4.</code></pre><h3 id="2-2-3-设置方法"><a href="#2-2-3-设置方法" class="headerlink" title="2.2.3 设置方法"></a>2.2.3 设置方法</h3><pre><code>默认字符集参数
建库
建表

2.3 校对规则（排序规则）  
2.3.1 作用 
影响到数据的排序方式。
    ASCII码
a    97
b    98
c    99
d    100

A    65
B    66
C    67
D    68
</code></pre><h2 id="2-3-2-查看属性"><a href="#2-3-2-查看属性" class="headerlink" title="2.3.2 查看属性"></a>2.3.2 查看属性</h2><pre><code>mysql&gt; show collation;
</code></pre><h2 id="2-4-列属性"><a href="#2-4-列属性" class="headerlink" title="2.4 列属性"></a>2.4 列属性</h2><h3 id="2-4-1-数据类型"><a href="#2-4-1-数据类型" class="headerlink" title="2.4.1 数据类型"></a>2.4.1 数据类型</h3><pre class="line-numbers language-powershell"><code class="language-powershell"><span class="token comment" spellcheck="true">#  作用 </span>
尽可能保证数据是有意义的。
<span class="token comment" spellcheck="true">#  种类 </span>
<span class="token comment" spellcheck="true">## 数字类型</span>
整数：
    tinyint   1字节  =  8位 = 00000000 <span class="token operator">-</span> 11111111  = 2^8个  = 0  <span class="token operator">-</span> 255     <span class="token punctuation">,</span> <span class="token operator">-</span>127<span class="token operator">-</span>128    
    int       4字节  =  32位                       = 2^32个 = 0  <span class="token operator">-</span> 2^32<span class="token operator">-</span>1  <span class="token punctuation">,</span><span class="token operator">-</span>2^31<span class="token operator">-</span>2^31<span class="token operator">-</span>1 <span class="token punctuation">,</span>10位数
    bigint    8字节                                           0  <span class="token operator">-</span> 2^64<span class="token operator">-</span>1  <span class="token punctuation">,</span><span class="token operator">-</span>2^63<span class="token operator">-</span>2^63<span class="token operator">-</span>1 <span class="token punctuation">,</span>20位数
浮点数：
    decimal<span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">## 字符串类型</span>
char<span class="token punctuation">(</span>N<span class="token punctuation">)</span>    : 
    N字符个数，最大不超过255
    定长的字符串类型。
    例如： char<span class="token punctuation">(</span>10<span class="token punctuation">)</span> <span class="token punctuation">,</span>最多存10个字符<span class="token punctuation">,</span>只要10个字符以内，都10个字符长度的存储空间。剩余用空格填充。
varchar<span class="token punctuation">(</span>M<span class="token punctuation">)</span> ：
    M字符个数，最大不超过65535
    变长的字符串类型。会额外占用1<span class="token operator">-</span>2字节存储字符长度。255字符之内，额外1字节，255以上，额外2字节
    例如： varchar<span class="token punctuation">(</span>10<span class="token punctuation">)</span><span class="token punctuation">,</span>最多存10个字符<span class="token punctuation">,</span>按需分配存储空间。
    abc 3             =4
    asdasdadasd 1000  =1002

enum<span class="token punctuation">(</span><span class="token string">'bj'</span><span class="token punctuation">,</span><span class="token string">'sh'</span><span class="token punctuation">,</span><span class="token string">'tj'</span><span class="token punctuation">,</span><span class="token string">'heibei'</span><span class="token punctuation">,</span><span class="token string">'henan'</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
district enum<span class="token punctuation">(</span><span class="token string">'bj'</span><span class="token punctuation">,</span><span class="token string">'sh'</span><span class="token punctuation">,</span><span class="token string">'tj'</span><span class="token punctuation">,</span><span class="token string">'heibei'</span><span class="token punctuation">,</span><span class="token string">'henan'</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-5时间类型"><a href="#2-5时间类型" class="headerlink" title="2.5时间类型"></a>2.5时间类型</h2><pre class="line-numbers language-shell"><code class="language-shell">datetime    8字节 
timestamp   4字节 

DATETIME 
范围为从 1000-01-01 00:00:00.000000 至 9999-12-31 23:59:59.999999。

TIMESTAMP 
1970-01-01 00:00:00.000000 至 2038-01-19 03:14:07.999999。
timestamp会受到时区的影响
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-6二进制类型"><a href="#2-6二进制类型" class="headerlink" title="2.6二进制类型"></a>2.6二进制类型</h3><pre><code>## 二进制类型
## json 数据类型


数据类型选型： 合适的、足够的、简短的
</code></pre><h2 id="2-7约束"><a href="#2-7约束" class="headerlink" title="2.7约束"></a>2.7约束</h2><pre class="line-numbers language-scala"><code class="language-scala"># 主键 primary key （PK）  ： 
<span class="token number">1</span><span class="token punctuation">.</span> 一张表只能有一个，可以有多个列构成
<span class="token number">2</span><span class="token punctuation">.</span> 特点： 非空<span class="token operator">+</span>唯一
<span class="token number">3</span><span class="token punctuation">.</span> 建议每张表都设置主键，有利于索引的应用，通常是使用自增的数字列更佳。


# 非空 not <span class="token keyword">null</span> <span class="token operator">:</span>
<span class="token number">1</span><span class="token punctuation">.</span> 特点： 必须录入值。
<span class="token number">2</span><span class="token punctuation">.</span> 建议： 每个列最好设置为，有利于索引的应用。


# 唯一 unique key ：
<span class="token number">1</span><span class="token punctuation">.</span> 特点： 不能有重复值。


# 无符号 unsigned
<span class="token number">1</span><span class="token punctuation">.</span> 特点： 针对数字列，无符号设定。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-8其他"><a href="#2-8其他" class="headerlink" title="2.8其他"></a>2.8其他</h2><pre><code>表属性 ： 
        engine  ： 存储引擎设置，默认是innodb，也是我们建议的。
        charset ： utf8mb4 
        comment :  注释。
列属性 ： 
        default       :  默认值。一般是在not null 配合使用
        auto_increment： 数字列自增长。一般是在主键列配合使用
        comment       ： 列的注释，建议每个列都有
</code></pre><h1 id="3-SQL-种类"><a href="#3-SQL-种类" class="headerlink" title="3. SQL 种类"></a>3. SQL 种类</h1><pre><code>3.1  DDL  ： 数据定义语言
对于： 库 、表（元数据）的 增、删、改
建库、删库、修改库、建表、删表、修改表
3.2 DCL  ： 数据控制语言
grant 
revoke 
3.3 DML  ： 数据操作语言
表的数据行进行的增、删、改、查
3.4 DQL  ： 数据查询语言
对于表数据行查看
对于元数据查看</code></pre><h2 id="1-DDL语句"><a href="#1-DDL语句" class="headerlink" title="1. DDL语句"></a>1. DDL语句</h2><pre class="line-numbers language-CQL"><code class="language-CQL">4.1 DDL-库定义 

# 建库  
CREATE DATABASE oldguo CHARSET utf8mb4;
CREATE DATABASE school CHARSET utf8mb4;

# 字符集设置： 
vim /etc/my.cnf
[mysqld]
character_set_server=utf8mb4
init_connect = "SET NAMES 'utf8mb4'"


# 改库  
CREATE DATABASE oldli ;
SHOW CREATE DATABASE oldboy;
SHOW CREATE DATABASE oldli;
ALTER DATABASE oldli CHARSET utf8mb4;
SHOW CREATE DATABASE oldli;

# 删库 
DROP DATABASE oldli;


# 查库 
show databases;
SHOW CREATE DATABASE oldboy;


# 库定义的 开发规范 
开发  ----》  测试   ----》 预发布  ----》生产
Windows                                   linux
test=TEST                               test ≠ TEST

1. 库名不能数字开头
2. 库名要和业务有关
3. 库名不要有大写字符
   原因：为了多平台兼容。
4. 建库需要显示指定字符集。建议是utf8mb4。    
5. 生产中禁用普通用户的drop database权限。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-DDL-表定义"><a href="#2-DDL-表定义" class="headerlink" title="2.DDL  - 表定义"></a>2.DDL  - 表定义</h2><pre><code># 建表 
Create table `oldboy`.`student`
( 
`id` int NOT NULL AUTO_INCREMENT COMMENT &#39;学号&#39;,
 `name` varchar(64) NOT NULL COMMENT &#39;学生姓名&#39;,
 `age` tinyint UNSIGNED NOT NULL DEFAULT 0 COMMENT &#39;学生年龄&#39;,
 `gender` CHAR(1) NOT NULL DEFAULT &#39;n&#39; COMMENT &#39;学生性别&#39;,
 `address` enum(&#39;北京&#39;,&#39;天津&#39;,&#39;上海&#39;,&#39;重庆&#39;,&#39;河北&#39;,&#39;河南&#39;,&#39;山东&#39;,&#39;未知&#39;) NOT NULL DEFAULT &#39;未知&#39; COMMENT &#39;省份&#39;, 
 `intime` datetime NOT NULL COMMENT &#39;入学时间&#39;,
 `shenfen` CHAR(18) NOT NULL COMMENT &#39;身份证&#39;,
 `num` int(10) UNSIGNED ZEROFILL NOT NULL COMMENT &#39;测试&#39;, 
 primary key (`id`) 
) ENGINE=InnoDB charset=utf8mb4 collate=utf8mb4_bin; 


补充：  
1. `` 反引号， 还原字符串原有的含义。
2. 克隆一张和student表结构一致的stu表。
create table stu like student;
3. 建表规范
    a. 表名： 
        不能数字开头
        业务有关
        不要大写字母
        不要超过18字符
        不能是关键字
    b. 存储引擎使用InnoDB
    c. 5.7版本以后，字符集使用utf8mb4
    d. 列名要和业务有关，不要超过18个字符
    e. 选择合适、足够、简短数据类型
    f. 建议每个列设置not null
    g. 每个列要有注释
    h. 每个表要有主键
    i. 针对not null 列，可以设定默认值。
    j. 表注释

推荐软件： 
yearing   开源SQL审核工具。
inception SQL审核工具。


# 查表
mysql&gt; use oldboy;
mysql&gt; show tables;
mysql&gt; show create table student;  # 命令行
mysql&gt; desc student;


# 改表（表定义=元数据）  

-- 修改表定义  
--- 添加列: 在student表中添加telnum列 *****
use oldboy;
desc student;
alter table oldboy.student 
add column telnum CHAR(11) not null unique key default &#39;0&#39; comment &#39;手机号&#39; ;
desc student;

--- 不建议的方式
alter table oldboy.student 
add column a CHAR(11) not null unique key default &#39;0&#39; comment &#39;手机号&#39; after gender ;
desc student;

alter table oldboy.student 
add column b CHAR(11) not null unique key default &#39;0&#39; comment &#39;手机号&#39; first ;
desc student;

--- 删除列 （不代表生产操作，危险！！！！）
alter table student drop  a;
alter table student drop  b;
alter table student drop  telnum;

--- 修改表属性
--- 修改表名 
alter table student rename to st;
--- 修改引擎  *****
create table t1(id int)engine=myisam;
show create table t1;
alter table t1 engine=innodb;
--- 修改字符集
create table t2(id int)charset=utf8;
show create table t2;
alter table t2 charset=utf8mb4;


--- 修改列属性
desc st;
--- 修改列名
alter table st change shenfen cardnum CHAR(18) not null default &#39;0&#39; comment &#39;身份证&#39;;

--- 修改默认值
alter table st change cardnum cardnum CHAR(18) not null default &#39;1&#39; comment &#39;身份证&#39;;

--- 修改数据类型 *****
alter table st modify cardnum CHAR(20) not null default &#39;1&#39; comment &#39;身份证&#39;;


#  删表(危险操作！！ 普通用户禁用 drop 操作)
drop table stu;


# 表定义规范
1. 建表  
    a. 表名： 
        不能数字开头
        业务有关
        不要大写字母
        不要超过18字符
        不能是关键字
    b. 存储引擎使用InnoDB
    c. 5.7版本以后，字符集使用utf8mb4
    d. 列名要和业务有关，不要超过18个字符
    e. 选择合适、足够、简短数据类型
    f. 建议每个列设置not null
    g. 每个列要有注释
    h. 每个表要有主键
    i. 针对not null 列，可以设定默认值。
    j. 表注释    
2. 修改表 
    a. 添加列，使用追加式添加列 
    b. 修改列属性，尽量使用modify语句
    c. 修改表定义，建议在业务不繁忙期间进行。尽量采用pt-osc或者gh-ost工具减少业务影响。

</code></pre><pre><code>上作业： 
    1. 什么是online-ddl? 各个版本的不同？
    参考 ： https://dev.mysql.com/doc/refman/5.7/en/innodb-online-ddl-operations.html
    2. pt-osc（percona-toolkit : pt-online-schema-change） 或者 gh-ost工具的使用
    参考： https://www.jianshu.com/p/c97228b6f60c 或者 百度。
</code></pre><h1 id="4-sql语句"><a href="#4-sql语句" class="headerlink" title="4-sql语句"></a>4-sql语句</h1><h3 id="1-DML"><a href="#1-DML" class="headerlink" title="1-DML"></a>1-DML</h3><pre><code>1.1 作用
针对 表 中的 数据行 进行的增、删、改、查
1.2 增 insert into ...
desc st;</code></pre><h3 id="2-增-insert-into-…"><a href="#2-增-insert-into-…" class="headerlink" title="2-增 insert into …"></a>2-增 insert into …</h3><pre class="line-numbers language-scss"><code class="language-scss">-- 标准 
必须 <span class="token string">''</span>
insert into 
    <span class="token function">st</span><span class="token punctuation">(</span>id,name,age,gender,address,intime,cardnum,num<span class="token punctuation">)</span>
<span class="token function">values</span><span class="token punctuation">(</span><span class="token number">1</span>,<span class="token string">'张三'</span>,<span class="token number">18</span>,<span class="token string">'m'</span>,<span class="token string">'北京'</span>,<span class="token string">'2020-04-27'</span>,<span class="token string">'666666'</span>,<span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

select <span class="token operator">*</span> <span class="token keyword">from</span> st<span class="token punctuation">;</span>

--- 部分列录入
insert into 
    <span class="token function">st</span><span class="token punctuation">(</span>name,intime,num<span class="token punctuation">)</span>
<span class="token function">values</span><span class="token punctuation">(</span><span class="token string">'李四'</span>,<span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span>,<span class="token number">1111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
select <span class="token operator">*</span> <span class="token keyword">from</span> st<span class="token punctuation">;</span>

alter table st modify intime datetime <span class="token operator">not</span> <span class="token null">null</span> default <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> comment <span class="token string">'入学时间'</span><span class="token punctuation">;</span>
insert into 
    <span class="token function">st</span><span class="token punctuation">(</span>name,num<span class="token punctuation">)</span>
<span class="token function">values</span><span class="token punctuation">(</span><span class="token string">'王五'</span>,<span class="token number">11112</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
select <span class="token operator">*</span> <span class="token keyword">from</span> st<span class="token punctuation">;</span>

--- 省略写法
desc st<span class="token punctuation">;</span>
insert into 
    st
<span class="token function">values</span><span class="token punctuation">(</span><span class="token number">5</span>,<span class="token string">'张三'</span>,<span class="token number">18</span>,<span class="token string">'m'</span>,<span class="token string">'北京'</span>,<span class="token string">'2020-04-27'</span>,<span class="token string">'666666'</span>,<span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
select <span class="token operator">*</span> <span class="token keyword">from</span> st<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-update-更新数据行的值"><a href="#3-update-更新数据行的值" class="headerlink" title="3 update 更新数据行的值"></a>3 update 更新数据行的值</h3><pre class="line-numbers language-powershell"><code class="language-powershell">-<span class="token operator">--</span> 更新数据行
update st <span class="token function">set</span> name=<span class="token string">'张六'</span>  where id=4<span class="token punctuation">;</span>
update st <span class="token function">set</span> name=<span class="token string">'错'</span> <span class="token punctuation">,</span> age=44 <span class="token punctuation">,</span>  address=<span class="token string">'北京'</span> where id=10


update st <span class="token function">set</span> name=<span class="token string">'张qi'</span> <span class="token punctuation">,</span> age=21  where id=4<span class="token punctuation">;</span>
<span class="token function">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> st<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4-delete-删除数据行"><a href="#4-delete-删除数据行" class="headerlink" title="4 delete 删除数据行"></a>4 delete 删除数据行</h3><pre class="line-numbers language-CQL"><code class="language-CQL">-- delete 
delete from st  where id=5;
select * from st;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="5-伪删除："><a href="#5-伪删除：" class="headerlink" title="5 伪删除："></a>5 伪删除：</h3><pre class="line-numbers language-CQL"><code class="language-CQL">1.5 伪删除： update 替代 delete ，添加状态列，1带表存在，0代表删除
改变 ： 
a. 添加状态列 
alter table st add column state tinyint not null default 1 comment '状态列,0是删除,1是存在';
alter table st add column sster tinyint not null  default 2  comment '状态列,0是删除,1是存在'
b. 使用update 替换 delete 
原： 
delete from st where id=4
修改后： 
update st set state=0 where id=4;
c. 替换原来查询业务语句
原：　
select * from st;
改变后：　
select * from st where state=1;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="彩蛋："><a href="#彩蛋：" class="headerlink" title="彩蛋："></a>彩蛋：</h2><pre class="line-numbers language-CQL"><code class="language-CQL">面试题 drop　table t1 ,truncate table t1 , delete from t1 区别 ？ 
# drop　table t1;    
    作用： 1. 删除所有表数据，删除整个表段（rm ibd  ）,属于物理性质，会释放磁盘空间。
           2. 删除表定义 (rm  frm , 元数据也会被删除)
# truncate table t1 ;
    作用： 保留表结构，清空表段中的数据页。属于物理删除，会释放磁盘空间。    

# delete from t1; 
    作用: 删除数据行。逐行删除。保留表结构，属于逻辑性质删除。只是标记删除，不会立即释放磁盘空间。
    所以delete 操作会产生碎片。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="5-DQL-数据查询语句"><a href="#5-DQL-数据查询语句" class="headerlink" title="5-DQL  数据查询语句"></a>5-DQL  数据查询语句</h1><h2 id="1-业务数据查询-select"><a href="#1-业务数据查询-select" class="headerlink" title="1 业务数据查询 - select"></a>1 业务数据查询 - select</h2><pre class="line-numbers language-CQL"><code class="language-CQL">2.1 业务数据查询 - select 
2.1.1 select 独立使用（MySQL 独有）
--- 查询数据库服务器配置参数
select @@port;
select @@server_id;
select @@basedir;
select @@datadir;
select @@socket;
select @@innodb_flush_log_at_trx_commit;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-替代方法："><a href="#2-替代方法：" class="headerlink" title="2-==替代方法：=="></a>2-==替代方法：==</h2><pre class="line-numbers language-CQL"><code class="language-CQL">show variables;
show variables like '%trx%';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="2-3-查询内置函数"><a href="#2-3-查询内置函数" class="headerlink" title="2.3-查询内置函数"></a>2.3-查询内置函数</h3><pre class="line-numbers language-CQL"><code class="language-CQL">select DATABASE();
select NOW();
select USER();
select CONCAT("hello world");
select user,host from mysql.user;
select CONCAT("数据库用户:",user,"@",host,plugin,";") from mysql.user;

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-4-其他数据库"><a href="#2-4-其他数据库" class="headerlink" title="2.4-其他数据库"></a>2.4-其他数据库</h3><pre><code>select NOW() from dual;</code></pre><h2 id="3-select-多子句执行顺序（单表）"><a href="#3-select-多子句执行顺序（单表）" class="headerlink" title="3-select 多子句执行顺序（单表）"></a>3-select 多子句执行顺序（单表）</h2><pre class="line-numbers language-CQL"><code class="language-CQL">select     列   
from       表  
where      条件  
group by   列 
having     条件 
order by   列 
limit      条件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-CQL"><code class="language-CQL">--- 学习业务？
--- 查看表的定义
desc city; 
---- id           : 主键 1-N数字
---- name         ：城市名
---- countrycode  ：国家编码(三个字母？CHN,USA)
select * from city where id<10;
---- district     : 区域 （省、州、县）
---- population   : 城市人口

---- 论 comment 的重要性

生产中熟悉业务： 
1. comment 
2. desc ，简单查询表中数据，猜
3. E-R关系图
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="1-select-配合-from-子句使用"><a href="#1-select-配合-from-子句使用" class="headerlink" title="1-select 配合 from 子句使用"></a>1-select 配合 from 子句使用</h2><pre class="line-numbers language-CQL"><code class="language-CQL">---  查询表中所有数据（小表）
use world;
select id,name,countrycode ,district,population 
from city;
# 或者
select id,name,countrycode ,district,population 
from world.city;

# 或者 
select * from city;

--- 查询部分列数据 
--- 例子： 查询所有城市名及人口信息。
select name,population from city;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-select-from-where-子句使用"><a href="#2-select-from-where-子句使用" class="headerlink" title="2-select  +  from + where 子句使用"></a>2-select  +  from + where 子句使用</h2><pre class="line-numbers language-CQL"><code class="language-CQL">--- where 配合 比较 操作符(= != > < >= <=)
--- 例子：查询city表中，所有中国的城市信息。 
select *  from city where countrycode = 'CHN';

--- 例子：查询人口数小于100人城市信息
select * from city where population<100;

--- where 配合逻辑连接符（and, or , between and），实现多条件过滤

--- 例子：查询中国,人口数超过500w的所有城市信息
select * from city where countrycode='CHN' and  population>5000000;

--- 例子：查询中国或美国的城市信息。
 select * from city where countrycode='CHN'  or countrycode='USA' ;
# 或者
 select * from city where countrycode in ('CHN','USA');

--- 例子：查询人口数为100w-200w（包括两头）城市信息



select * from city where population >= 1000000 and population <= 2000000 
# 或者： 
select * from city where population between (介于)  1000000 and  2000000 ;
between (介于)
--- 例子 ：查询中国或美国，人口数大于500w的城市


SELECT * FROM city WHERE (countrycode='CNH' OR countrycode='USA' ) AND population>5000000;
select * from world.city where countrycode in ('CHN','USA') and population >= 5000000;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="3-where-配合-like-语句实现模糊查询"><a href="#3-where-配合-like-语句实现模糊查询" class="headerlink" title="3-where 配合 like 语句实现模糊查询"></a>3-where 配合 like 语句实现模糊查询</h2><pre class="line-numbers language-CQL"><code class="language-CQL">--- 查询城市名为qing开头的城市信息
select * from city where name like 'qing%';
select * from city where name like '%qing%';  
# 一般线上业务慎用%qing%，不走索引，如果业务中很多需求，ES可以很好解决。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="6-se-lect-from-group-by-聚合函数"><a href="#6-se-lect-from-group-by-聚合函数" class="headerlink" title="6-se==lect +== from + group by + ==聚合函数=="></a>6-se==lect +== from + group by + ==聚合函数==</h1><h2 id="聚合函数："><a href="#聚合函数：" class="headerlink" title="聚合函数："></a>聚合函数：</h2><pre class="line-numbers language-CQL"><code class="language-CQL">count()            统计数量
sum()              求和
avg()              平均数
max()              最大值
min()              最小值
group_concat()     列转行
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="1-group-by-分组功能原理"><a href="#1-group-by-分组功能原理" class="headerlink" title="1-group  by  分组功能原理"></a>1-group  by  分组功能原理</h2><pre class="line-numbers language-CQL"><code class="language-CQL">1. 按照分组条件进行排序
2. 进行分组列的去重复
3. 聚合函数将其他列的结果进行聚合。
--- SQL_MODE=only_full_group 
保证group by 语句 准确性。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-select-from-group-by-聚合函数"><a href="#2-select-from-group-by-聚合函数" class="headerlink" title="2-select + from + group by + 聚合函数"></a>2-select + from + group by + 聚合函数</h2><pre class="line-numbers language-mysql"><code class="language-mysql">例子： 统计city表的行数
select COUNT(*) from city;

--- 例子： 统计中国城市的个数


select COUNT(*) from city where countrycode='CHN';

--- 例子： 统计中国的总人口数。


select SUM(population) from city where countrycode='CHN';

--- 例子：统计每个国家的城市个数。


select countrycode,COUNT(name) from city group by countrycode;

--- 练习1： 统计每个国家的总人口数。
select countrycode,sum(population) from city   group by countrycode ;

--- 练习2： 中国每个省的城市个数，和总人口数。


mysql> select district, COUNT(name),name
    -> from city 
    -> where countrycode='CHN'  group by district 
    -> ;
ERROR 1055 (42000): Expression #3 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'world.city.Name' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by
mysql> 

报错说明： 5.7 之后的SQL对于group by语句的限制。
1. 没有在group by 后
2. 同时没有在函数中聚合操作
违反了SQL_MODE=only_full_group_by

--- 练习3：  统计中国每个省的城市个数及城市名列表。


select district, COUNT(name),GROUP_CONCAT(name)
from city 
where countrycode='CHN'  group by district 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="3-having-子句应用"><a href="#3-having-子句应用" class="headerlink" title="3-having  子句应用"></a>3-having  子句应用</h2><pre class="line-numbers language-CQL"><code class="language-CQL">后判断，主要应用在group by之后需要判断。
--- 统计每个国家的总人口数，只显示总人口超过1亿人的信息

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-mysql"><code class="language-mysql">select countrycode,SUM(population)  
from city 
group by countrycode 
having  SUM(population)>100000000;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="4-order-by-语句应用"><a href="#4-order-by-语句应用" class="headerlink" title="4-order by 语句应用"></a>4-order by 语句应用</h2><pre class="line-numbers language-CQL"><code class="language-CQL">--- 例子： 查询所有城市信息，并按照人口数排序输出。
select * from city order by population;

--- 例子：查询中国所有的城市信息，并按照人口数从大到小排序输出

select * from city where countrycode = 'CHN' order by population desc ;

--- 例子： 每个国家的总人口数，总人口超过5000w的信息,并按总人口数从大到小排序输出


select countrycode,SUM(population)  
from city 
group by countrycode 
having  SUM(population)>50000000
order by SUM(population) desc ;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="5-limit-分页查询"><a href="#5-limit-分页查询" class="headerlink" title="5-limit  分页查询"></a>5-limit  分页查询</h2><pre class="line-numbers language-CQL"><code class="language-CQL">- 一般配合order by 使用
--- 例子： 查询中国所有的城市信息，并按照人口数从大到小排序输出，只显示前十名。
select * 
from city 
where countrycode = 'CHN' 
order by population desc 
limit 10 ;

--- 6-10 名 

select * 
from city 
where countrycode = 'CHN' 
order by population desc 
limit 5,5


select * 
from city 
where countrycode = 'CHN' 
order by population desc 
limit 5 offset 5;

-- limit M,N : 跳过M行，显示N行
-- limit N offset M : 跳过M行，显示N行


彩蛋： 
    limit 有可能对性能的影响。    
    limit 1000

大表中： 
limit 5000000,10
明确查询范围，使用精确的where去做数据获取。

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="7-多表查询笛卡尔乘积"><a href="#7-多表查询笛卡尔乘积" class="headerlink" title="7. 多表查询笛卡尔乘积"></a>7. 多表查询笛卡尔乘积</h1><pre class="line-numbers language-CQL"><code class="language-CQL">use school
student ：学生表
sno：    学号
sname：学生姓名
sage： 学生年龄
ssex： 学生性别

teacher ：教师表
tno：     教师编号
tname：教师名字

course ：课程表
cno：  课程编号
cname：课程名字
tno：  教师编号

score  ：成绩表
sno：  学号
cno：  课程编号
score：成绩

-- 项目构建
drop database school;
CREATE DATABASE school CHARSET utf8;
USE school

CREATE TABLE student(
sno INT NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT '学号',
sname VARCHAR(20) NOT NULL COMMENT '姓名',
sage TINYINT UNSIGNED  NOT NULL COMMENT '年龄',
ssex  ENUM('f','m') NOT NULL DEFAULT 'm' COMMENT '性别'
)ENGINE=INNODB CHARSET=utf8;

CREATE TABLE course(
cno INT NOT NULL PRIMARY KEY COMMENT '课程编号',
cname VARCHAR(20) NOT NULL COMMENT '课程名字',
tno INT NOT NULL  COMMENT '教师编号'
)ENGINE=INNODB CHARSET utf8;

CREATE TABLE sc (
sno INT NOT NULL COMMENT '学号',
cno INT NOT NULL COMMENT '课程编号',
score INT  NOT NULL DEFAULT 0 COMMENT '成绩'
)ENGINE=INNODB CHARSET=utf8;

CREATE TABLE teacher(
tno INT NOT NULL PRIMARY KEY COMMENT '教师编号',
tname VARCHAR(20) NOT NULL COMMENT '教师名字'
)ENGINE=INNODB CHARSET utf8;

INSERT INTO student(sno,sname,sage,ssex)
VALUES (1,'zhang3',18,'m');

INSERT INTO student(sno,sname,sage,ssex)
VALUES
(2,'zhang4',18,'m'),
(3,'li4',18,'m'),
(4,'wang5',19,'f');

INSERT INTO student
VALUES
(5,'zh4',18,'m'),
(6,'zhao4',18,'m'),
(7,'ma6',19,'f');

INSERT INTO student(sname,sage,ssex)
VALUES
('oldboy',20,'m'),
('oldgirl',20,'f'),
('oldp',25,'m');


INSERT INTO teacher(tno,tname) VALUES
(101,'oldboy'),
(102,'hesw'),
(103,'oldguo');

DESC course;
INSERT INTO course(cno,cname,tno)
VALUES
(1001,'linux',101),
(1002,'python',102),
(1003,'mysql',103);

DESC sc;
INSERT INTO sc(sno,cno,score)
VALUES
(1,1001,80),
(1,1002,59),
(2,1002,90),
(2,1003,100),
(3,1001,99),
(3,1003,40),
(4,1001,79),
(4,1002,61),
(4,1003,99),
(5,1003,40),
(6,1001,89),
(6,1003,77),
(7,1001,67),
(7,1003,82),
(8,1001,70),
(9,1003,80),
(10,1003,96);

SELECT * FROM student;
SELECT * FROM teacher;
SELECT * FROM course;
SELECT * FROM sc;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-CQL"><code class="language-CQL">-- 项目构建
source /root/school.sql
1.1 多表查询类型
1.1.1 笛卡尔乘积 
select  *   from  teacher,course;
或者： 
select * from teacher join course;

拿着 teacher每行数据和course逐行进行组合，显示
两层for循环的实现逻辑。Simple-Nextloop （嵌套循环方式）
得出的结果，会有部分数据是无意义的。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="1-内连接-（取交集）"><a href="#1-内连接-（取交集）" class="headerlink" title="1-内连接 （取交集）"></a>1-内连接 （取交集）</h2><pre class="line-numbers language-CQL"><code class="language-CQL">mysql> select * from teacher  join course on teacher.tno=course.tno ;
+-----+--------+------+--------+-----+
| tno | tname  | cno  | cname  | tno |
+-----+--------+------+--------+-----+
| 101 | oldboy | 1001 | linux  | 101 |
| 102 | hesw   | 1002 | python | 102 |
| 103 | oldguo | 1003 | mysql  | 103 |
+-----+--------+------+--------+-----+
3 rows in set (0.00 sec)
mysql> select * from teacher,course where teacher.tno=course.tno;
+-----+--------+------+--------+-----+
| tno | tname  | cno  | cname  | tno |
+-----+--------+------+--------+-----+
| 101 | oldboy | 1001 | linux  | 101 |
| 102 | hesw   | 1002 | python | 102 |
| 103 | oldguo | 1003 | mysql  | 103 |
+-----+--------+------+--------+-----+
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-外连接-（left-join-right-join-）"><a href="#2-外连接-（left-join-right-join-）" class="headerlink" title="2-外连接 （left join , right join ）"></a>2-外连接 （left join , right join ）</h2><pre class="line-numbers language-CQL"><code class="language-CQL">mysql> select * from teacher left join course on teacher.tno=course.tno ;
+-----+--------+------+--------+------+
| tno | tname  | cno  | cname  | tno  |
+-----+--------+------+--------+------+
| 101 | oldboy | 1001 | linux  |  101 |
| 102 | hesw   | 1002 | python |  102 |
| 103 | oldguo | 1003 | mysql  |  103 |
| 104 | oldx   | NULL | NULL   | NULL |
| 105 | oldw   | NULL | NULL   | NULL |
+-----+--------+------+--------+------+
5 rows in set (0.00 sec)

mysql> select * from teacher right  join course on teacher.tno=course.tno;
+------+--------+------+--------+-----+
| tno  | tname  | cno  | cname  | tno |
+------+--------+------+--------+-----+
|  101 | oldboy | 1001 | linux  | 101 |
|  102 | hesw   | 1002 | python | 102 |
|  103 | oldguo | 1003 | mysql  | 103 |
| NULL | NULL   | 1004 | k8s    | 108 |
+------+--------+------+--------+-----+
4 rows in set (0.00 sec)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="3-多表连接语"><a href="#3-多表连接语" class="headerlink" title="3-多表连接语"></a>3-多表连接语</h2><blockquote>
<p>a 和 b 有直接的关联关系</p>
<p><strong>select a.x,b.y  from a  join b on a.z=b.z  where  group by  having order by limit;</strong></p>
</blockquote>
<ul>
<li>a 和 b 没有直接的关联关系</li>
<li>假如：  a 和 c 有关， b和c 有关<br>a join c on a.i = c.j join b on c.x=b.y</li>
</ul>
<h3 id="3-1-方案-套路"><a href="#3-1-方案-套路" class="headerlink" title="3.-1-方案 套路"></a>3.-1-方案 套路</h3><pre class="line-numbers language-css"><code class="language-css">    <span class="token number">1.</span> 根据题意将所有涉及到的表找出来 a  b 
    <span class="token number">2.</span> 找到a和b直接或者间接的关联条件 
    <span class="token number">3.</span> 用join on 语句把所有表连接到一起
    <span class="token number">4.</span> 罗列其他查询条件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="4-大量练习"><a href="#4-大量练习" class="headerlink" title="4-大量练习"></a>4-大量练习</h2><h3 id="1：-每位老师所教课程名称。"><a href="#1：-每位老师所教课程名称。" class="headerlink" title="1： 每位老师所教课程名称。"></a>1： 每位老师所教课程名称。</h3><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">select</span> 
  teacher<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>course<span class="token punctuation">.</span>cname
  <span class="token keyword">from</span> teacher 
  <span class="token keyword">join</span> course
  on teacher<span class="token punctuation">.</span>tno<span class="token operator">=</span>course<span class="token punctuation">.</span>tno<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2：统计每个学员，学习课程的门数"><a href="#2：统计每个学员，学习课程的门数" class="headerlink" title="2：统计每个学员，学习课程的门数"></a>2：统计每个学员，学习课程的门数</h3><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">select</span> <span class="token function">CONCAT</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>sname<span class="token punctuation">,</span><span class="token string">"_"</span><span class="token punctuation">,</span>student<span class="token punctuation">.</span>sno<span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> student
<span class="token keyword">join</span> sc
on student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno 
<span class="token keyword">group</span>  by student<span class="token punctuation">.</span>sno<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="1：统计每个学员，学习课程的门数和课程名列表"><a href="#1：统计每个学员，学习课程的门数和课程名列表" class="headerlink" title="1：统计每个学员，学习课程的门数和课程名列表"></a>1：统计每个学员，学习课程的门数和课程名列表</h3><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token operator">--</span> 关系图： student <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span> sc  <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span> course <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">></span> teacher
<span class="token keyword">select</span> <span class="token function">CONCAT</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>sname<span class="token punctuation">,</span><span class="token string">"_"</span><span class="token punctuation">,</span>student<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">GROUP_CONCAT</span><span class="token punctuation">(</span>course<span class="token punctuation">.</span>cname<span class="token punctuation">)</span>
<span class="token keyword">from</span> student 
<span class="token keyword">join</span> sc
on student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno
<span class="token keyword">join</span> course 
on sc<span class="token punctuation">.</span>cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno
<span class="token keyword">group</span> by student<span class="token punctuation">.</span>sno<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-：每位老师教的学生数量和学生名列表"><a href="#2-：每位老师教的学生数量和学生名列表" class="headerlink" title="2 ：每位老师教的学生数量和学生名列表"></a>2 ：每位老师教的学生数量和学生名列表</h3><pre class="line-numbers language-CQL"><code class="language-CQL">-- 关系图： student ----> sc  ----> course ---> teacher
select CONCAT(teacher.tname,"_",teacher.tno),COUNT(*),GROUP_CONCAT(student.sname)
from teacher 
join course
on teacher.tno=course.tno
join sc
on course.cno=sc.cno 
join student
on sc.sno=student.sno
group by teacher.tno<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-：每位老师教所教课程的平均分"><a href="#3-：每位老师教所教课程的平均分" class="headerlink" title="3 ：每位老师教所教课程的平均分"></a>3 ：每位老师教所教课程的平均分</h3><pre class="line-numbers language-CQL"><code class="language-CQL">select CONCAT(teacher.tname,"_",teacher.tno,"_",course.cno),AVG(sc.score)
from teacher 
join course
on teacher.tno=course.tno
join sc
on course.cno=sc.cno 
group by teacher.tno , course.cno<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4-：查找学习了hesw但没学习oldguo课程的学生名。"><a href="#4-：查找学习了hesw但没学习oldguo课程的学生名。" class="headerlink" title="4 ：查找学习了hesw但没学习oldguo课程的学生名。"></a>4 ：查找学习了hesw但没学习oldguo课程的学生名。</h3><pre class="line-numbers language-CQL"><code class="language-CQL">select a.sname from 
(select student.sname
from teacher 
join course
on teacher.tno=course.tno
join sc
on course.cno=sc.cno 
join student
on sc.sno=student.sno
where teacher.tname = 'hesw') as a
left join 
(select student.sname  
from teacher 
join course
on teacher.tno=course.tno
join sc
on course.cno=sc.cno 
join student
on sc.sno=student.sno
where teacher.tname = 'oldguo') as b
on a.sname=b.sname
where b.sname is null  

SELECT student.`sname`,GROUP_CONCAT(teacher.tname)
FROM student
JOIN sc
ON sc.`sno`=student.`sno`
JOIN course
ON course.cno=sc.cno
JOIN teacher
ON teacher.tno=course.`tno`
GROUP BY student.sno

HAVING GROUP_CONCAT(teacher.tname) LIKE '%hesw%' AND GROUP_CONCAT(teacher.tname) NOT LIKE '%oldguo%'
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5-：查询出只选修了一门课程的全部学生的学号和姓名"><a href="#5-：查询出只选修了一门课程的全部学生的学号和姓名" class="headerlink" title="5 ：查询出只选修了一门课程的全部学生的学号和姓名"></a>5 ：查询出只选修了一门课程的全部学生的学号和姓名</h3><pre class="line-numbers language-CQL"><code class="language-CQL">select student.sname,student.sno ,COUNT(*)
from  course 
join sc
on course.cno=sc.cno  
join student
on sc.sno=student.sno 
group by student.sno 
having COUNT(*) = 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="6-：查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分"><a href="#6-：查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分" class="headerlink" title="6 ：查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分"></a>6 ：查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分</h3><pre class="line-numbers language-cassandra"><code class="language-cassandra">select course.cname ,MAX(sc.score),MIN(sc.score)
from course
join sc 
on course.cno=sc.cno 
group by course.cno;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="7-：查询平均成绩大于85的所有学生的学号、姓名和平均成绩"><a href="#7-：查询平均成绩大于85的所有学生的学号、姓名和平均成绩" class="headerlink" title="7 ：查询平均成绩大于85的所有学生的学号、姓名和平均成绩"></a>7 ：查询平均成绩大于85的所有学生的学号、姓名和平均成绩</h3><pre><code>select student.sno,student.sname,AVG(sc.score)
from student
join sc
on student.sno=sc.sno 
group by student.sno
having AVG(sc.score)&gt;85;</code></pre><h3 id="8-：统计各位老师-所教课程的及格率"><a href="#8-：统计各位老师-所教课程的及格率" class="headerlink" title="8 ：统计各位老师,所教课程的及格率"></a>8 ：统计各位老师,所教课程的及格率</h3><pre><code>case 
when   条件1    then 输出 1      
end
</code></pre><h3 id="9-：统计每门课程-优秀-85分以上-良好-70-85-一般-60-70-不及格-小于60-的学生列表"><a href="#9-：统计每门课程-优秀-85分以上-良好-70-85-一般-60-70-不及格-小于60-的学生列表" class="headerlink" title="9 ：统计每门课程:优秀(85分以上),良好(70-85),一般(60-70),不及格(小于60)的学生列表"></a>9 ：统计每门课程:优秀(85分以上),良好(70-85),一般(60-70),不及格(小于60)的学生列表</h3><pre class="line-numbers language-CQL"><code class="language-CQL">select 
course.cname , 
GROUP_CONCAT(case when sc.score>=85 then  student.sname end),
GROUP_CONCAT(case when sc.score>=70 and sc.score<85 then  student.sname end),
GROUP_CONCAT(case when sc.score>=60 and sc.score<70 then  student.sname end),
GROUP_CONCAT(case when sc.score<60 then  student.sname end)
from course
join sc 
on course.cno=sc.cno
join student
on sc.sno=student.sno 
group by course.cno 


--- 别名使用
1. 表别名
select 
a.cname , 
GROUP_CONCAT(case when b.score>=85 then  c.sname end),
GROUP_CONCAT(case when b.score>=70 and b.score<85 then  c.sname end),
GROUP_CONCAT(case when b.score>=60 and b.score<70 then  c.sname end),
GROUP_CONCAT(case when b.score<60 then  c.sname end)
from course as a
join sc as b 
on a.cno=b.cno
join student as c
on b.sno=c.sno 
group by a.cno 

功能： 表别名设置之后，覆盖到整个查询。



2. 列别名
select 
a.cname as "课程名称" , 
GROUP_CONCAT(case when b.score>=85 then  c.sname end) as "优秀学员",
GROUP_CONCAT(case when b.score>=70 and b.score<85 then  c.sname end) as "良好学员",
GROUP_CONCAT(case when b.score>=60 and b.score<70 then  c.sname end) as "一般学员",
GROUP_CONCAT(case when b.score<60 then  c.sname end) as "不及格学员"
from course as a
join sc as b 
on a.cno=b.cno
join student as c
on b.sno=c.sno 
group by a.cno 


功能：
1.显示好看
2. 列别名只能在 having 、order by 子句中调用<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="8-元数据获取"><a href="#8-元数据获取" class="headerlink" title="8. 元数据获取"></a>8. 元数据获取</h1><h2 id="1-常用show-语句"><a href="#1-常用show-语句" class="headerlink" title="1-常用show 语句"></a>1-常用show 语句</h2><pre class="line-numbers language-CQL"><code class="language-CQL">help show;
show databases;                      # 查询所有库名
show tables;                         # 查询当前库的所有表名  
show tables from world;              # 查询world库下的所有表名
show create database world;         # 查询world建库语句
show create table city;             # 当前库下的city表建表语句
show create table world.city;       # world库下的建表语句   
show privileges;                    # 数据库中所有权限
show engines;                       # 数据库中支持的存储引擎
show grants for root@'localhost'    # 查询某个用户权限
show charset;                       # 查询数据库字符集支持
show collation;                     # 查询所有校对规则的支持
show variables like '%trx%'         # 查询数据库参数 
show status like 'com_%'            # 查询数据库的状态
show processlist;                  # 查询所有会话信息
show engine innodb status           # 查询innodb引擎相关的状态
show binary logs                    # 查询二进制日志文件信息
show binlog events in 'xxx'         # 查看二进制日志事件
show master status ;                # 当前正在使用的二进制日志信息
show slave status\G                 # 查看主从状态相关信息
show slave hosts;                   # 查看从库主机信息
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-通过系统表查询元数据"><a href="#2-通过系统表查询元数据" class="headerlink" title="2 通过系统表查询元数据"></a>2 通过系统表查询元数据</h2><pre><code>2.2.1 mysql
# 权限表： 
    user
    db
# 统计信息表 :
    innodb_index_stats
    innodb_table_stats

2.2.2 IS(information_schema)
对象属性：
tables  
columns

2.2.3 PS 
性能有关

2.2.4 SYS
性能有关

</code></pre><h2 id="3-IS中的-tables-和-columns-的应用"><a href="#3-IS中的-tables-和-columns-的应用" class="headerlink" title="3-IS中的 tables 和 columns 的应用"></a>3-IS中的 tables 和 columns 的应用</h2><h3 id="1-一、-数据库资产统计"><a href="#1-一、-数据库资产统计" class="headerlink" title="1-一、 数据库资产统计"></a>1-一、 数据库资产统计</h3><pre class="line-numbers language-CQL"><code class="language-CQL">use information_schema;
desc tables;
-- table_schema   表所在的库
-- table_name     表名
-- engine         存储引擎
-- table_rows     表行数
-- avg_row_length 平均行长度
-- index_length   索引长度
-- data_free      碎片的大小
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="4：每个业务库表的个数和名称"><a href="#4：每个业务库表的个数和名称" class="headerlink" title="4：每个业务库表的个数和名称"></a>4：每个业务库表的个数和名称</h2><pre><code>select  table_schema,count(*),group_concat(table_name)
from information_schema.tables
where table_schema not in (&#39;mysql&#39;,&#39;information_schema&#39;,&#39;performance_schema&#39;,&#39;sys&#39;)
group by table_schema;</code></pre><h2 id="5：-统计每个库的数据量"><a href="#5：-统计每个库的数据量" class="headerlink" title="5： 统计每个库的数据量"></a>5： 统计每个库的数据量</h2><pre><code>select  table_schema,SUM(table_rows*avg_row_length+index_length) as total_B
from information_schema.tables
where table_schema not in (&#39;mysql&#39;,&#39;information_schema&#39;,&#39;performance_schema&#39;,&#39;sys&#39;)
group by table_schema;</code></pre><h2 id="6：-查询业务表中，所有不是InnoDB引擎的表"><a href="#6：-查询业务表中，所有不是InnoDB引擎的表" class="headerlink" title="6： 查询业务表中，所有不是InnoDB引擎的表"></a>6： 查询业务表中，所有不是InnoDB引擎的表</h2><pre><code>select  table_schema,table_name
from information_schema.tables
where 
table_schema not in (&#39;mysql&#39;,&#39;information_schema&#39;,&#39;performance_schema&#39;,&#39;sys&#39;)
and engine!=&#39;innodb&#39;;</code></pre><h2 id="7-命令拼接，完成批量工作"><a href="#7-命令拼接，完成批量工作" class="headerlink" title="7-命令拼接，完成批量工作"></a>7-命令拼接，完成批量工作</h2><pre><code>alter table oldboy.t1 engine=innodb;
select  concat(&quot;alter table &quot;,table_schema,&quot;.&quot;,table_name,&quot; engine=innodb;&quot;)
from information_schema.tables
where 
table_schema not in (&#39;mysql&#39;,&#39;information_schema&#39;,&#39;performance_schema&#39;,&#39;sys&#39;)
and engine!=&#39;innodb&#39; into outfile &#39;/tmp/alter.sql&#39;;


</code></pre>
            </div>
            <hr />

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">写作不易，客官能否打赏一杯奶茶？</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            

    <div class="reprint" id="reprint-statement">
        <p class="reprint-tip">
            <i class="fa fa-exclamation-triangle"></i>&nbsp;&nbsp;
            <span>转载规则</span>
        </p>
        
            <div class="center-align">
                <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                    <img alt=""
                         style="border-width:0"
                         src="https://i.creativecommons.org/l/by/4.0/88x31.png"/>
                </a>
            </div>
            <br/>
            <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text"
                  property="dct:title" rel="dct:type">
                    《第五章SQL 常识》
                </span> 由
            <a xmlns:cc="http://creativecommons.org/ns#" href="/2020/02/26/05-sql-ying-yong-ji-chu/" property="cc:attributionName"
               rel="cc:attributionURL">
                小明
            </a> 采用
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                知识共享署名 4.0 国际许可协议
            </a>进行许可。
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


        </div>
    </div>

    
    <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '',
        clientSecret: '',
        repo: 'godweiyang.github.io',
        owner: 'godweiyang',
        admin: "godweiyang",
        id: '2020/02/26/05-sql-ying-yong-ji-chu/',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    
    <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments input[type=text],
    #vcomments input[type=email],
    #vcomments input[type=url],
    #vcomments textarea {
        box-sizing: border-box;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #42b983;
        font-weight: 500;
        text-decoration: underline;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div id="vcomments" class="card-content"></div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->

<script>
    new Valine({
        el: '#vcomments',
        appId: '',
        appKey: '',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'false' === 'true',
        avatar: 'wavatar',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '如果你没有GitHub账号，还可以在这里评论啦！'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/02/28/02-mysql-guang-su-ru-men-pian-cha-xun/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/16.jpg" class="responsive-img" alt="02-mysql光速入门篇查询">
                        
                        <span class="card-title">02-mysql光速入门篇查询</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            select数据表三连
查看表结构

desc table_name;
复制代码
查看建表语句

show create table table_name;
复制代码
查看表里的数据

select * from table_name;
复
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2020-02-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/mysql/" class="post-category" target="_blank">
                                    mysql
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/mysql/" target="_blank">
                        <span class="chip bg-color">mysql</span>
                    </a>
                    
                    <a href="/tags/mysql光速入门篇章/" target="_blank">
                        <span class="chip bg-color">mysql光速入门篇章</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/02/24/di-si-zhang-mysql-sheng-ji-he-jiang-ji/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/28.jpg" class="responsive-img" alt="MySQL升级和降级">
                        
                        <span class="card-title">MySQL升级和降级</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            1. MySQL升级和降级`
1.1 方式1.1.1 INPLACE  就地 
在一台服务器上，原版本升级到新版本。
风险较大。
==建议 ： 不管哪种方式升级，都应该先做备份。方便失败回退。==1.1.2 Mergeing 迁移   建议
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2020-02-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/mysql/" class="post-category" target="_blank">
                                    mysql
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/mysql/" target="_blank">
                        <span class="chip bg-color">mysql</span>
                    </a>
                    
                    <a href="/tags/数据库/" target="_blank">
                        <span class="chip bg-color">数据库</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('5')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 小明同学<br />'
            + '作者: 小明<br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () { bodyElement.removeChild(newdiv); }, 200);
    });
</script>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>

<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>
<!-- 代码语言 -->
<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>
<!-- 代码块复制 -->
<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>
<!-- 代码块收缩 -->
<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 
<!-- 代码块折行 -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>


    <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            &copy; 2019-2020 小明. 版权所有

            
            &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
            <span class="white-color">55.4k</span>
            

            <br>
            <span id="sitetime"></span>

            
            
            <br>
            
            <span id="busuanzi_container_site_pv" style='display:none'>
                <i class="fa fa-heart-o"></i>
                本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
            <span id="busuanzi_container_site_uv" style='display:none'>
                人次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
            </span>
            
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/xiaoming" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:ye33445200@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="https://zhihu.com/people/xiaoming" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-inverse">知</i>
    </a>



    <a href="http://wpa.qq.com/msgrd?v=3&uin=970740860&site=qq&menu=yes" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="https://weibo.com/xiaoming" class="tooltipped" target="_blank" data-tooltip="关注我的微博" data-position="top" data-delay="50">
        <i class="fa fa-weibo"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>

<!-- 不蒜子计数初始值纠正 -->
<script>
    $(document).ready(function () {

        var int = setInterval(fixCount, 50);
        var pvcountOffset = 80000;
        var uvcountOffset = 20000;

        function fixCount() {
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset);
                clearInterval(int);
            }
            if ($("#busuanzi_container_site_pv").css("display") != "none") {
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
                clearInterval(int);
            }
        }
    });
</script>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2019, 04, 22, 00, 00, 00); //北京时间2020-04-22 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已运行 " + diffYears + " 年 " + diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <script type="text/javascript"> var OriginTitile = document.title, st; document.addEventListener("visibilitychange", function () { document.hidden ? (document.title = "Σ(っ °Д °;)っ喔哟，崩溃啦！", clearTimeout(st)) : (document.title = "φ(゜▽゜*)♪咦，又好了！", st = setTimeout(function () { document.title = OriginTitile }, 3e3)) })
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '');
</script>



    
    <script src="/libs/others/clicklove.js"></script>
    

    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    <!-- 雪花特效 -->
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>

</html>